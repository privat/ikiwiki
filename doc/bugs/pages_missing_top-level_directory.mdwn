Hi,

I've rebuilt two sites now, and anything that requires a working directory structure isn't working properly. I have no idea how it's doing this. I don't see anything in my templates, and I haven't messed around with the back-end code much.

An example would show this best I think.

<pre>
/                   <- root of site
/About/             <- sub-directory
      /Policy/      <- sub-sub-
</pre>

When you're on /About/, any generated links get mapped to /Policy/ and NOT /About/Policy/ - of course this results in a 404 error.

I used to be able to use relative links or absolute ones to get the links I want, and now I can't do either. The generated link results in a 404 due to the stripping of a directory.

I don't know if it's related to the fact that I have one ikiwiki install under another (/blog/ under / is also ikiwiki), but both are FUBAR.

> what do you mean by generated links: do you mean the output of
> [[ikiwiki/wikilink]]s? Or are you generating links some other way?
> When you say "on /About/, any generated links get mapped to
> /Policy/ and NOT /About/Policy" can you provide an example of what
> source generates the link? -- [[Jon]]

>> No, a \[[map]] call, such as:
>>
>> (actual code)<br />
>> = = = = =<br />
>> \[[!map pages="About/*" show="title"]]<br />
>> = = = = =<br />
>>
>> The end result is:<br />
>> (actual code)
>>
<pre>
&lt;div class="map">
&lt;ul>
&lt;li>&lt;a class="mapitem" href="./Policy/">Policy&lt;/a>
&lt;ul>
&lt;li>&lt;a class="mapitem" href="./Policy/Microblog/">Microblogging subscription policy&lt;/a>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/div>
</pre>

> I'm also confused about what is generating the links. The map directive?
> You? --[[Joey]]

>> see above :)

>> I suspect this is due to git scanning everything under the pwd of the .git/ directory, but not totally so.
>> Other ikiwiki sites I have don't do this, and work OK, on the same server, but different docroots.
